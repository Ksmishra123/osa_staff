{% extends 'base.html' %}
{% block content %}

<style>
/* Print-friendly call sheet */
@media print {
  body {
    font-family: Arial, sans-serif;
    color: #000;
  }
  header, footer, button, a.btn {
    display: none !important;
  }
  table {
    page-break-inside: avoid;
  }
}

.call-header {
  text-align: center;
  margin-bottom: 20px;
}

.call-header img {
  height: 80px;
  margin-bottom: 10px;
}

.call-header h1 {
  margin: 0;
  font-size: 24px;
  letter-spacing: 0.5px;
}

.call-details {
  text-align: center;
  font-size: 14px;
  margin-bottom: 20px;
}

.call-table {
  width: 100%;
  border-collapse: collapse;
}

.call-table th, .call-table td {
  border: 1px solid #ddd;
  padding: 8px;
}

.call-table th {
  background-color: #f4f4f4;
  text-align: left;
}
</style>

<div class="call-header">
  <img src="{{ url_for('static', filename='OSA_Logo_Silver_Gold.png') }}" alt="On Stage America Logo">
  <h1>On Stage America - Event Call Sheet</h1>
</div>

<div class="call-details">
  <strong>City:</strong> {{ ev.city }}<br>
  <strong>Date:</strong> {{ ev.date.strftime('%B %d, %Y %I:%M %p') if ev.date else '' }}<br>
  {% if ev.venue %}<strong>Venue:</strong> {{ ev.venue }}<br>{% endif %}
  {% if ev.hotel %}<strong>Hotel:</strong> {{ ev.hotel }}<br>{% endif %}
  {% if ev.event_start %}<strong>Start Time:</strong> {{ ev.event_start.strftime('%I:%M %p') }}{% endif %}
  {% if ev.event_end %} &nbsp; | &nbsp; <strong>End Time:</strong> {{ ev.event_end.strftime('%I:%M %p') }}{% endif %}
</div>

<table class="call-table">
  <thead>
    <tr>
      <th>Position</th>
      <th>Name</th>
      <th>Phone</th>
      <th>Email</th>
    </tr>
  </thead>
  <tbody>
    {% for a in rows %}
    <tr>
      <td>{{ a.position.name }}</td>
      <td>{{ a.person.name if a.person else '' }}</td>
      <td>{{ a.person.phone if a.person else '' }}</td>
      <td>{{ a.person.email if a.person else '' }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<div style="text-align:center; margin-top:20px;">
  <button onclick="window.print()" class="btn">üñ®Ô∏è Print Call Sheet</button>
</div>

{% endblock %}

