{% extends 'base.html' %}
{% block content %}
<style>
  .bio-card { page-break-inside: avoid; margin: 18px 0; padding: 16px; border: 1px solid #e5e7eb; border-radius: 12px; }
  .bio-grid { display: grid; grid-template-columns: 120px 1fr; gap: 16px; align-items: start; }
  .bio-headshot { width: 120px; height: 120px; object-fit: cover; border-radius: 8px; border: 1px solid #ddd; }
  .bio-name { font-size: 1.25rem; font-weight: 700; margin: 0 0 6px 0; }
  .bio-sub { color: #6b7280; margin: 0 0 8px 0; }
  .bio-text { white-space: pre-wrap; line-height: 1.5; }
  @media print {
    .no-print { display: none; }
    .bio-card { border: none; break-inside: avoid; }
  }
</style>

<div class="no-print" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
  <h1 style="margin:0;">Bios — {{ ev.city }}{% if ev.date %} ({{ ev.date.strftime('%B %d, %Y') }}){% endif %}</h1>
  <button onclick="window.print()" class="btn btn-sm">Print</button>
</div>

{% for p in people %}
  <div class="bio-card">
    <div class="bio-grid">
      <div>
        {% if p.headshot_path %}
          <img class="bio-headshot" src="{{ p.headshot_path }}" alt="{{ p.name }} headshot">
        {% else %}
          <div class="bio-headshot" style="display:flex; align-items:center; justify-content:center; color:#9ca3af;">No Photo</div>
        {% endif %}
      </div>
      <div>
        <h2 class="bio-name">{{ p.name }}</h2>

        {# Optional: show roles/positions at this event (names only). 
           Remove this block if you don’t want it. #}
        {% set roles = [] %}
        {% for a in ev.assignments if a.person_id == p.id %}
          {% if a.position and a.position.name %}
            {% set _ = roles.append(a.position.name) %}
          {% endif %}
        {% endfor %}
        {% if roles %}
          <p class="bio-sub">{{ roles|unique|join(', ') }}</p>
        {% endif %}

        {# BIO TEXT ONLY — no phone, email, or airport #}
        <div class="bio-text">
          {{ (p.bio or '—') }}
        </div>
      </div>
    </div>
  </div>
{% endfor %}
{% endblock %}
